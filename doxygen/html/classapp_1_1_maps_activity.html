<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Motorbike Statistics: app.MapsActivity Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Motorbike Statistics
   </div>
   <div id="projectbrief">A system for logging statistics of motorbikes</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>app</b></li><li class="navelem"><a class="el" href="classapp_1_1_maps_activity.html">MapsActivity</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classapp_1_1_maps_activity-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">app.MapsActivity Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Maps activity class for displaying map data.  
 <a href="classapp_1_1_maps_activity.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for app.MapsActivity:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classapp_1_1_maps_activity.png" usemap="#app.MapsActivity_map" alt=""/>
  <map id="app.MapsActivity_map" name="app.MapsActivity_map">
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classapp_1_1_maps_activity_1_1_statistic_window_adapter.html">StatisticWindowAdapter</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adapter used for displaying statistics at a certain marker that user has clicked on.  <a href="classapp_1_1_maps_activity_1_1_statistic_window_adapter.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aa055cb8e4b8b0374144ea78a41e03cde"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classapp_1_1_maps_activity.html#aa055cb8e4b8b0374144ea78a41e03cde">onMapReady</a> (GoogleMap googleMap)</td></tr>
<tr class="memdesc:aa055cb8e4b8b0374144ea78a41e03cde"><td class="mdescLeft">&#160;</td><td class="mdescRight">Manipulates the map once available.  <a href="#aa055cb8e4b8b0374144ea78a41e03cde">More...</a><br /></td></tr>
<tr class="separator:aa055cb8e4b8b0374144ea78a41e03cde"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a9d6e93e08c98b8cba7b1d3b0ce8069f6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classapp_1_1_maps_activity.html#a9d6e93e08c98b8cba7b1d3b0ce8069f6">onCreate</a> (Bundle savedInstanceState)</td></tr>
<tr class="memdesc:a9d6e93e08c98b8cba7b1d3b0ce8069f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fills our maps array with points to plot on the map.  <a href="#a9d6e93e08c98b8cba7b1d3b0ce8069f6">More...</a><br /></td></tr>
<tr class="separator:a9d6e93e08c98b8cba7b1d3b0ce8069f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a3d9211324f7cdd99e45e937d9531fa64"><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classapp_1_1_maps_activity.html#a3d9211324f7cdd99e45e937d9531fa64">getJSONObjects</a> ()</td></tr>
<tr class="memdesc:a3d9211324f7cdd99e45e937d9531fa64"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets point data and convert to array of JSON objects.  <a href="#a3d9211324f7cdd99e45e937d9531fa64">More...</a><br /></td></tr>
<tr class="separator:a3d9211324f7cdd99e45e937d9531fa64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af218b54a108513db96fa7d3fae88ab0e"><td class="memItemLeft" align="right" valign="top">JSONObject&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classapp_1_1_maps_activity.html#af218b54a108513db96fa7d3fae88ab0e">findJSONByLatLng</a> (LatLng position)</td></tr>
<tr class="memdesc:af218b54a108513db96fa7d3fae88ab0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finds JSONObject from ArrayList via LAT/LNG coordinates.  <a href="#af218b54a108513db96fa7d3fae88ab0e">More...</a><br /></td></tr>
<tr class="separator:af218b54a108513db96fa7d3fae88ab0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6371091cfe1e9ac462fc3a10597d7df1"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classapp_1_1_maps_activity.html#a6371091cfe1e9ac462fc3a10597d7df1">calcDistance</a> (LatLng start, LatLng end)</td></tr>
<tr class="memdesc:a6371091cfe1e9ac462fc3a10597d7df1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the absolute distance between two points.  <a href="#a6371091cfe1e9ac462fc3a10597d7df1">More...</a><br /></td></tr>
<tr class="separator:a6371091cfe1e9ac462fc3a10597d7df1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a0fc4c42b7ffccfc5708b0684c9b34e55"><td class="memItemLeft" align="right" valign="top"><a id="a0fc4c42b7ffccfc5708b0684c9b34e55"></a>
GoogleMap&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classapp_1_1_maps_activity.html#a0fc4c42b7ffccfc5708b0684c9b34e55">mMap</a></td></tr>
<tr class="memdesc:a0fc4c42b7ffccfc5708b0684c9b34e55"><td class="mdescLeft">&#160;</td><td class="mdescRight">Google maps object for plotting. <br /></td></tr>
<tr class="separator:a0fc4c42b7ffccfc5708b0684c9b34e55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1adb005b5ea81013fa17b1f1f21ed0e"><td class="memItemLeft" align="right" valign="top"><a id="ae1adb005b5ea81013fa17b1f1f21ed0e"></a>
ArrayList&lt; JSONObject &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classapp_1_1_maps_activity.html#ae1adb005b5ea81013fa17b1f1f21ed0e">jsonList</a> = new ArrayList&lt;JSONObject&gt;()</td></tr>
<tr class="memdesc:ae1adb005b5ea81013fa17b1f1f21ed0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">ArrayList holding all trip data. <br /></td></tr>
<tr class="separator:ae1adb005b5ea81013fa17b1f1f21ed0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Maps activity class for displaying map data. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a9d6e93e08c98b8cba7b1d3b0ce8069f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d6e93e08c98b8cba7b1d3b0ce8069f6">&#9670;&nbsp;</a></span>onCreate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void app.MapsActivity.onCreate </td>
          <td>(</td>
          <td class="paramtype">Bundle&#160;</td>
          <td class="paramname"><em>savedInstanceState</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Fills our maps array with points to plot on the map. </p>
<p>Called when maps activity is first started. Responsible for making sure we have points to plot.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">savedInstanceState</td><td>- Information holding last previous state. </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;                                                       {</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        super.onCreate(savedInstanceState);</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        setContentView(R.layout.activity_maps);</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        <span class="comment">// Obtain the SupportMapFragment and get notified when the map is ready to be used.</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        SupportMapFragment mapFragment = (SupportMapFragment) getSupportFragmentManager()</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;                .findFragmentById(R.id.map);</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        <a class="code" href="classapp_1_1_maps_activity.html#a3d9211324f7cdd99e45e937d9531fa64">getJSONObjects</a>();</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        mapFragment.getMapAsync(<span class="keyword">this</span>);</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    }</div><div class="ttc" id="classapp_1_1_maps_activity_html_a3d9211324f7cdd99e45e937d9531fa64"><div class="ttname"><a href="classapp_1_1_maps_activity.html#a3d9211324f7cdd99e45e937d9531fa64">app.MapsActivity.getJSONObjects</a></div><div class="ttdeci">boolean getJSONObjects()</div><div class="ttdoc">Gets point data and convert to array of JSON objects. </div><div class="ttdef"><b>Definition:</b> MapsActivity.java:79</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3d9211324f7cdd99e45e937d9531fa64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d9211324f7cdd99e45e937d9531fa64">&#9670;&nbsp;</a></span>getJSONObjects()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boolean app.MapsActivity.getJSONObjects </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets point data and convert to array of JSON objects. </p>
<p>Gets an arraylist of strings passed via a bundle to this activity. These strings are there converted back to JSON objects which will be used for plotting. The reason for not passing straight JSON objects is because they are not serializable and passable between activities.</p>
<dl class="section return"><dt>Returns</dt><dd>boolean - Whether all objects were able to be created. </dd></dl>
<div class="fragment"><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    {</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        <span class="keywordtype">boolean</span> result = <span class="keyword">true</span>;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        <span class="comment">/*</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment">         * Get our serialized arrayList of jsonStrings</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">         * then convert them back to jsonObjects</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        ArrayList&lt;String&gt; jsonStrings = (ArrayList&lt;String&gt;)getIntent().getSerializableExtra(<span class="stringliteral">&quot;JSONList&quot;</span>);</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; jsonStrings.size(); i++)</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        {</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;            <span class="keywordflow">try</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;            {</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;                JSONObject jsonObject = <span class="keyword">new</span> JSONObject(jsonStrings.get(i));</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;                <a class="code" href="classapp_1_1_maps_activity.html#ae1adb005b5ea81013fa17b1f1f21ed0e">jsonList</a>.add(jsonObject);</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;            }</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;            <span class="keywordflow">catch</span> (JSONException e)</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;            {</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                result = <span class="keyword">false</span>;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;            }</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        }</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        <span class="keywordflow">return</span> result;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    }</div><div class="ttc" id="classapp_1_1_maps_activity_html_ae1adb005b5ea81013fa17b1f1f21ed0e"><div class="ttname"><a href="classapp_1_1_maps_activity.html#ae1adb005b5ea81013fa17b1f1f21ed0e">app.MapsActivity.jsonList</a></div><div class="ttdeci">ArrayList&lt; JSONObject &gt; jsonList</div><div class="ttdoc">ArrayList holding all trip data. </div><div class="ttdef"><b>Definition:</b> MapsActivity.java:45</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af218b54a108513db96fa7d3fae88ab0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af218b54a108513db96fa7d3fae88ab0e">&#9670;&nbsp;</a></span>findJSONByLatLng()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">JSONObject app.MapsActivity.findJSONByLatLng </td>
          <td>(</td>
          <td class="paramtype">LatLng&#160;</td>
          <td class="paramname"><em>position</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Finds JSONObject from ArrayList via LAT/LNG coordinates. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">position</td><td>- Latitude and Longitude position. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>JSONObject - The found JSON object. </dd></dl>

<p class="reference">References <a class="el" href="logging-device_8ino.html#a548727e041a5cd3db91bdbd0ccd71e30">gpsJSON</a>.</p>
<div class="fragment"><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                                                         {</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        JSONObject result = null;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classapp_1_1_maps_activity.html#ae1adb005b5ea81013fa17b1f1f21ed0e">jsonList</a>.size(); i++) {</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;            JSONObject tmpJSON = <a class="code" href="classapp_1_1_maps_activity.html#ae1adb005b5ea81013fa17b1f1f21ed0e">jsonList</a>.get(i);</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;            <span class="keywordflow">try</span> {</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                JSONObject <a class="code" href="logging-device_8ino.html#a548727e041a5cd3db91bdbd0ccd71e30">gpsJSON</a> = tmpJSON.getJSONObject(<span class="stringliteral">&quot;gps&quot;</span>);</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                Double latitude = gpsJSON.getDouble(<span class="stringliteral">&quot;lat&quot;</span>);</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                Double longitude = gpsJSON.getDouble(<span class="stringliteral">&quot;lng&quot;</span>);</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                <span class="comment">/* Check to see if latitude and logitudes match */</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                <span class="keywordflow">if</span> ((latitude == position.latitude) &amp;&amp; (longitude == position.longitude)) {</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                    result = tmpJSON;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                }</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;            } <span class="keywordflow">catch</span> (JSONException e) {</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                <span class="comment">/* Do nothing */</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;            }</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        }</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        <span class="keywordflow">return</span> result;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    }</div><div class="ttc" id="logging-device_8ino_html_a548727e041a5cd3db91bdbd0ccd71e30"><div class="ttname"><a href="logging-device_8ino.html#a548727e041a5cd3db91bdbd0ccd71e30">gpsJSON</a></div><div class="ttdeci">JsonObject &amp; gpsJSON</div><div class="ttdoc">Holds all location related information. </div><div class="ttdef"><b>Definition:</b> logging-device.ino:84</div></div>
<div class="ttc" id="classapp_1_1_maps_activity_html_ae1adb005b5ea81013fa17b1f1f21ed0e"><div class="ttname"><a href="classapp_1_1_maps_activity.html#ae1adb005b5ea81013fa17b1f1f21ed0e">app.MapsActivity.jsonList</a></div><div class="ttdeci">ArrayList&lt; JSONObject &gt; jsonList</div><div class="ttdoc">ArrayList holding all trip data. </div><div class="ttdef"><b>Definition:</b> MapsActivity.java:45</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6371091cfe1e9ac462fc3a10597d7df1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6371091cfe1e9ac462fc3a10597d7df1">&#9670;&nbsp;</a></span>calcDistance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float app.MapsActivity.calcDistance </td>
          <td>(</td>
          <td class="paramtype">LatLng&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">LatLng&#160;</td>
          <td class="paramname"><em>end</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculates the absolute distance between two points. </p>
<p>Distance is as the crow flys and not via streets etc. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">start</td><td>- Start position. </td></tr>
    <tr><td class="paramname">end</td><td>- End position. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>flaot - Distance between points in metres. </dd></dl>
<div class="fragment"><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    {</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <span class="keywordtype">float</span>[] results = <span class="keyword">new</span> <span class="keywordtype">float</span>[1];</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        Location.distanceBetween(start.latitude, start.longitude, end.latitude, end.longitude, results);</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        <span class="keywordflow">return</span> results[0];</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    }</div></div><!-- fragment -->
</div>
</div>
<a id="aa055cb8e4b8b0374144ea78a41e03cde"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa055cb8e4b8b0374144ea78a41e03cde">&#9670;&nbsp;</a></span>onMapReady()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void app.MapsActivity.onMapReady </td>
          <td>(</td>
          <td class="paramtype">GoogleMap&#160;</td>
          <td class="paramname"><em>googleMap</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Manipulates the map once available. </p>
<p>This callback is triggered when the map is ready to be used. This is where we can add markers or lines.</p>
<p>If Google Play services is not installed on the device, the user will be prompted to install it inside the SupportMapFragment. This method will only be triggered once the user has installed Google Play services and returned to the app.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">googleMap</td><td>- Our map object ready to manipulate. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="el" href="logging-device_8ino.html#a548727e041a5cd3db91bdbd0ccd71e30">gpsJSON</a>.</p>
<div class="fragment"><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                                                {</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        <a class="code" href="classapp_1_1_maps_activity.html#a0fc4c42b7ffccfc5708b0684c9b34e55">mMap</a> = googleMap;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        <a class="code" href="classapp_1_1_maps_activity.html#a0fc4c42b7ffccfc5708b0684c9b34e55">mMap</a>.setMapType(GoogleMap.MAP_TYPE_HYBRID);</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <span class="comment">/* Set our info window adapter class that is shown when marker clicked */</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <a class="code" href="classapp_1_1_maps_activity.html#a0fc4c42b7ffccfc5708b0684c9b34e55">mMap</a>.setInfoWindowAdapter(<span class="keyword">new</span> StatisticWindowAdapter());</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <span class="comment">/* If we have no data don&#39;t bother plotting points */</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classapp_1_1_maps_activity.html#ae1adb005b5ea81013fa17b1f1f21ed0e">jsonList</a>.size() != 0)</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        {</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            <span class="comment">/* lineOpts will store our route */</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;            PolylineOptions lineOpts = <span class="keyword">new</span> PolylineOptions();</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            lineOpts.color(Color.parseColor( <span class="stringliteral">&quot;#CC0000FF&quot;</span>));</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;            lineOpts.width(5);</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;            lineOpts.visible(<span class="keyword">true</span>);</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;            <span class="keywordflow">try</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;            {</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                LatLng lastMarker = null;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                <span class="comment">/* Plot every point in the our JSONObject array */</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classapp_1_1_maps_activity.html#ae1adb005b5ea81013fa17b1f1f21ed0e">jsonList</a>.size(); i++)</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                {</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                    JSONObject rootJSON = <a class="code" href="classapp_1_1_maps_activity.html#ae1adb005b5ea81013fa17b1f1f21ed0e">jsonList</a>.get(i);</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                    JSONObject <a class="code" href="logging-device_8ino.html#a548727e041a5cd3db91bdbd0ccd71e30">gpsJSON</a> = rootJSON.getJSONObject(<span class="stringliteral">&quot;gps&quot;</span>);</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                    Double lat = gpsJSON.getDouble(<span class="stringliteral">&quot;lat&quot;</span>);</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                    Double lng = gpsJSON.getDouble(<span class="stringliteral">&quot;lng&quot;</span>);</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                    LatLng location = <span class="keyword">new</span> LatLng(lat, lng);</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                    <span class="comment">/* Add this location to our trip line */</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                    lineOpts.add(location);</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                    <span class="comment">/*</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment">                     * Check if distance between this point and</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment">                     * last marker is greater than 5m otherwise don&#39;t add marker.</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment">                     * Adding markers every 5 metres prevents the map being spammed with</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment">                     * thousands of readings.</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment">                     */</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                    <span class="keywordflow">if</span> ((lastMarker == null) || (<a class="code" href="classapp_1_1_maps_activity.html#a6371091cfe1e9ac462fc3a10597d7df1">calcDistance</a>(location, lastMarker) &gt; 5))</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                    {</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                        <span class="comment">/* Only add a marker if the gps data is valid */</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                        <span class="keywordflow">if</span> (gpsJSON.getBoolean(<span class="stringliteral">&quot;gps_valid&quot;</span>) == <span class="keyword">true</span>) {</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                            MarkerOptions markerOptions = <span class="keyword">new</span> MarkerOptions();</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                            markerOptions.position(location);</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                            markerOptions.title(<span class="stringliteral">&quot;Reading: &quot;</span> + i);</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                            <a class="code" href="classapp_1_1_maps_activity.html#a0fc4c42b7ffccfc5708b0684c9b34e55">mMap</a>.addMarker(markerOptions);</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                            lastMarker = location;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                            <span class="comment">/* Changes camera to point to newest marker */</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                            <a class="code" href="classapp_1_1_maps_activity.html#a0fc4c42b7ffccfc5708b0684c9b34e55">mMap</a>.animateCamera(CameraUpdateFactory.newLatLngZoom(location, 12));</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                        }</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                    }</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                }</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                <a class="code" href="classapp_1_1_maps_activity.html#a0fc4c42b7ffccfc5708b0684c9b34e55">mMap</a>.addPolyline(lineOpts);</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            }</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;            <span class="keywordflow">catch</span> (JSONException e)</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;            {</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                <span class="comment">/* Do nothing */</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;            }</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        }</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    }</div><div class="ttc" id="logging-device_8ino_html_a548727e041a5cd3db91bdbd0ccd71e30"><div class="ttname"><a href="logging-device_8ino.html#a548727e041a5cd3db91bdbd0ccd71e30">gpsJSON</a></div><div class="ttdeci">JsonObject &amp; gpsJSON</div><div class="ttdoc">Holds all location related information. </div><div class="ttdef"><b>Definition:</b> logging-device.ino:84</div></div>
<div class="ttc" id="classapp_1_1_maps_activity_html_ae1adb005b5ea81013fa17b1f1f21ed0e"><div class="ttname"><a href="classapp_1_1_maps_activity.html#ae1adb005b5ea81013fa17b1f1f21ed0e">app.MapsActivity.jsonList</a></div><div class="ttdeci">ArrayList&lt; JSONObject &gt; jsonList</div><div class="ttdoc">ArrayList holding all trip data. </div><div class="ttdef"><b>Definition:</b> MapsActivity.java:45</div></div>
<div class="ttc" id="classapp_1_1_maps_activity_html_a6371091cfe1e9ac462fc3a10597d7df1"><div class="ttname"><a href="classapp_1_1_maps_activity.html#a6371091cfe1e9ac462fc3a10597d7df1">app.MapsActivity.calcDistance</a></div><div class="ttdeci">float calcDistance(LatLng start, LatLng end)</div><div class="ttdoc">Calculates the absolute distance between two points. </div><div class="ttdef"><b>Definition:</b> MapsActivity.java:144</div></div>
<div class="ttc" id="classapp_1_1_maps_activity_html_a0fc4c42b7ffccfc5708b0684c9b34e55"><div class="ttname"><a href="classapp_1_1_maps_activity.html#a0fc4c42b7ffccfc5708b0684c9b34e55">app.MapsActivity.mMap</a></div><div class="ttdeci">GoogleMap mMap</div><div class="ttdoc">Google maps object for plotting. </div><div class="ttdef"><b>Definition:</b> MapsActivity.java:43</div></div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>android-app/app/src/main/java/com/jack/motorbikestatistics/<a class="el" href="_maps_activity_8java.html">MapsActivity.java</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
