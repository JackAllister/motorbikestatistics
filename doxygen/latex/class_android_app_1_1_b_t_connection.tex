\hypertarget{class_android_app_1_1_b_t_connection}{}\section{Android\+App.\+B\+T\+Connection Class Reference}
\label{class_android_app_1_1_b_t_connection}\index{Android\+App.\+B\+T\+Connection@{Android\+App.\+B\+T\+Connection}}


Thread class for a new bluetooth connection to a device.  


Inheritance diagram for Android\+App.\+B\+T\+Connection\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_android_app_1_1_b_t_connection}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{class_android_app_1_1_b_t_connection_a9211856a493caa2423f07e36c2fd12b6}{B\+T\+Connection} (Bluetooth\+Device \hyperlink{class_android_app_1_1_b_t_connection_a3ed1e51b0f24f0b20ca5c27270f2999c}{bt\+Device})  throws I\+O\+Exception 
\begin{DoxyCompactList}\small\item\em Constructor for \hyperlink{class_android_app_1_1_b_t_connection}{B\+T\+Connection} class. \end{DoxyCompactList}\item 
void \hyperlink{class_android_app_1_1_b_t_connection_a41022747db3c5a8bf0f4ddbc7bf32a3d}{set\+R\+X\+Handler} (Handler new\+Handler)
\begin{DoxyCompactList}\small\item\em Setter function for R\+X\+Handler. \end{DoxyCompactList}\item 
Handler \hyperlink{class_android_app_1_1_b_t_connection_a2d2a381cb7cb2bcab1db0c804e85a32d}{get\+R\+X\+Handler} ()
\begin{DoxyCompactList}\small\item\em Getter function for R\+X\+Handler. \end{DoxyCompactList}\item 
void \hyperlink{class_android_app_1_1_b_t_connection_a03907fd685748cb0da88a7f17d90885f}{run} ()
\begin{DoxyCompactList}\small\item\em Main run procedure for new Runnable thread created. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_android_app_1_1_b_t_connection_a4f542434c59f541d47b68a0e225cfea9}\label{class_android_app_1_1_b_t_connection_a4f542434c59f541d47b68a0e225cfea9}} 
void \hyperlink{class_android_app_1_1_b_t_connection_a4f542434c59f541d47b68a0e225cfea9}{stop} ()
\begin{DoxyCompactList}\small\item\em Procedure to stop the bluetooth connection thread from running. \end{DoxyCompactList}\item 
boolean \hyperlink{class_android_app_1_1_b_t_connection_a88abb39350aef278f15e54be4d0d1df3}{is\+Running} ()
\begin{DoxyCompactList}\small\item\em Function to check whether main connection thread is running. \end{DoxyCompactList}\item 
boolean \hyperlink{class_android_app_1_1_b_t_connection_a1c91fcddfe9f3b69cd0141742103191a}{is\+Connected} ()
\begin{DoxyCompactList}\small\item\em Function to check whether BT connection is still valid. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
final Handler \hyperlink{class_android_app_1_1_b_t_connection_a3236a74297d91f15dd63efc66f03a821}{tx\+Handler}
\begin{DoxyCompactList}\small\item\em Handler class for transmission of data. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{class_android_app_1_1_b_t_connection_a1dfc9451ba1b40089f17ee081486602e}{connect} ()  throws I\+O\+Exception 
\begin{DoxyCompactList}\small\item\em Procedure to create a connection to logging device. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_android_app_1_1_b_t_connection_a37bb3e5c1dcf6b78a73239f6f62ab6d8}\label{class_android_app_1_1_b_t_connection_a37bb3e5c1dcf6b78a73239f6f62ab6d8}} 
void \hyperlink{class_android_app_1_1_b_t_connection_a37bb3e5c1dcf6b78a73239f6f62ab6d8}{close} ()  throws I\+O\+Exception 
\begin{DoxyCompactList}\small\item\em Closes the BT connection socket, exceptions thrown on failure. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_android_app_1_1_b_t_connection_a3ed1e51b0f24f0b20ca5c27270f2999c}\label{class_android_app_1_1_b_t_connection_a3ed1e51b0f24f0b20ca5c27270f2999c}} 
Bluetooth\+Device \hyperlink{class_android_app_1_1_b_t_connection_a3ed1e51b0f24f0b20ca5c27270f2999c}{bt\+Device}
\begin{DoxyCompactList}\small\item\em Bluetooth Device object, holds information for chosen slave. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_android_app_1_1_b_t_connection_a4e3bfea96a4ddbd2cd2b76bb4ce8b871}\label{class_android_app_1_1_b_t_connection_a4e3bfea96a4ddbd2cd2b76bb4ce8b871}} 
Handler \hyperlink{class_android_app_1_1_b_t_connection_a4e3bfea96a4ddbd2cd2b76bb4ce8b871}{R\+X\+Handler} = null
\begin{DoxyCompactList}\small\item\em Handler function where received data is sent to. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_android_app_1_1_b_t_connection_af3cdc6c880b28361d87d0118ace0e49c}\label{class_android_app_1_1_b_t_connection_af3cdc6c880b28361d87d0118ace0e49c}} 
Bluetooth\+Socket \hyperlink{class_android_app_1_1_b_t_connection_af3cdc6c880b28361d87d0118ace0e49c}{bt\+Socket} = null
\begin{DoxyCompactList}\small\item\em Socket created for bluetooth connection, used for T\+X/\+RX. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_android_app_1_1_b_t_connection_ace01a7a97f5d1abccb61a5d6c6ad9295}\label{class_android_app_1_1_b_t_connection_ace01a7a97f5d1abccb61a5d6c6ad9295}} 
volatile boolean \hyperlink{class_android_app_1_1_b_t_connection_ace01a7a97f5d1abccb61a5d6c6ad9295}{running} = false
\begin{DoxyCompactList}\small\item\em Indicates whether main run thread is in progress. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Static Private Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_android_app_1_1_b_t_connection_ad838024d59c68be866b5db329d6f6230}\label{class_android_app_1_1_b_t_connection_ad838024d59c68be866b5db329d6f6230}} 
static final String \hyperlink{class_android_app_1_1_b_t_connection_ad838024d59c68be866b5db329d6f6230}{T\+AG} = \char`\"{}B\+T\+Connection\char`\"{}
\begin{DoxyCompactList}\small\item\em Tag using for debugging. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_android_app_1_1_b_t_connection_a0e531d4cad0e5cca1e5b4446551b5c63}\label{class_android_app_1_1_b_t_connection_a0e531d4cad0e5cca1e5b4446551b5c63}} 
static final U\+U\+ID \hyperlink{class_android_app_1_1_b_t_connection_a0e531d4cad0e5cca1e5b4446551b5c63}{uuid} = U\+U\+I\+D.\+from\+String(\char`\"{}00001101-\/0000-\/1000-\/8000-\/00805f9b34fb\char`\"{})
\begin{DoxyCompactList}\small\item\em U\+U\+ID to allow Serial connection via BT. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_android_app_1_1_b_t_connection_afe2f59edec0610e765222e02ab350e84}\label{class_android_app_1_1_b_t_connection_afe2f59edec0610e765222e02ab350e84}} 
static final String \hyperlink{class_android_app_1_1_b_t_connection_afe2f59edec0610e765222e02ab350e84}{N\+E\+W\+\_\+\+L\+I\+NE} = \char`\"{}\textbackslash{}r\textbackslash{}n\char`\"{}
\begin{DoxyCompactList}\small\item\em New line string. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Thread class for a new bluetooth connection to a device. 

\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_android_app_1_1_b_t_connection_a9211856a493caa2423f07e36c2fd12b6}\label{class_android_app_1_1_b_t_connection_a9211856a493caa2423f07e36c2fd12b6}} 
\index{Android\+App\+::\+B\+T\+Connection@{Android\+App\+::\+B\+T\+Connection}!B\+T\+Connection@{B\+T\+Connection}}
\index{B\+T\+Connection@{B\+T\+Connection}!Android\+App\+::\+B\+T\+Connection@{Android\+App\+::\+B\+T\+Connection}}
\subsubsection{\texorpdfstring{B\+T\+Connection()}{BTConnection()}}
{\footnotesize\ttfamily Android\+App.\+B\+T\+Connection.\+B\+T\+Connection (\begin{DoxyParamCaption}\item[{Bluetooth\+Device}]{bt\+Device }\end{DoxyParamCaption}) throws I\+O\+Exception\hspace{0.3cm}{\ttfamily [inline]}}



Constructor for \hyperlink{class_android_app_1_1_b_t_connection}{B\+T\+Connection} class. 

Sets the BT device interface used for this class and attempts a connection.


\begin{DoxyParams}{Parameters}
{\em bt\+Device} & -\/ Device used for creating connection. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
59                                \{
60         this.\hyperlink{class_android_app_1_1_b_t_connection_a3ed1e51b0f24f0b20ca5c27270f2999c}{btDevice} = \hyperlink{class_android_app_1_1_b_t_connection_a3ed1e51b0f24f0b20ca5c27270f2999c}{btDevice};
61 
62         \textcolor{comment}{/* Connect the device so ready to use run */}
63         \hyperlink{class_android_app_1_1_b_t_connection_a1dfc9451ba1b40089f17ee081486602e}{connect}();
64     \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{class_android_app_1_1_b_t_connection_a41022747db3c5a8bf0f4ddbc7bf32a3d}\label{class_android_app_1_1_b_t_connection_a41022747db3c5a8bf0f4ddbc7bf32a3d}} 
\index{Android\+App\+::\+B\+T\+Connection@{Android\+App\+::\+B\+T\+Connection}!set\+R\+X\+Handler@{set\+R\+X\+Handler}}
\index{set\+R\+X\+Handler@{set\+R\+X\+Handler}!Android\+App\+::\+B\+T\+Connection@{Android\+App\+::\+B\+T\+Connection}}
\subsubsection{\texorpdfstring{set\+R\+X\+Handler()}{setRXHandler()}}
{\footnotesize\ttfamily void Android\+App.\+B\+T\+Connection.\+set\+R\+X\+Handler (\begin{DoxyParamCaption}\item[{Handler}]{new\+Handler }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Setter function for R\+X\+Handler. 


\begin{DoxyParams}{Parameters}
{\em new\+Handler} & -\/ The new Handler where RX\textquotesingle{}d data will be sent to. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
108                                                  \{
109         \hyperlink{class_android_app_1_1_b_t_connection_a4e3bfea96a4ddbd2cd2b76bb4ce8b871}{RXHandler} = newHandler;
110     \}
\end{DoxyCode}
\mbox{\Hypertarget{class_android_app_1_1_b_t_connection_a2d2a381cb7cb2bcab1db0c804e85a32d}\label{class_android_app_1_1_b_t_connection_a2d2a381cb7cb2bcab1db0c804e85a32d}} 
\index{Android\+App\+::\+B\+T\+Connection@{Android\+App\+::\+B\+T\+Connection}!get\+R\+X\+Handler@{get\+R\+X\+Handler}}
\index{get\+R\+X\+Handler@{get\+R\+X\+Handler}!Android\+App\+::\+B\+T\+Connection@{Android\+App\+::\+B\+T\+Connection}}
\subsubsection{\texorpdfstring{get\+R\+X\+Handler()}{getRXHandler()}}
{\footnotesize\ttfamily Handler Android\+App.\+B\+T\+Connection.\+get\+R\+X\+Handler (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Getter function for R\+X\+Handler. 

\begin{DoxyReturn}{Returns}
Handler -\/ The RX handler for BT connection. 
\end{DoxyReturn}

\begin{DoxyCode}
117                                   \{
118         \textcolor{keywordflow}{return} \hyperlink{class_android_app_1_1_b_t_connection_a4e3bfea96a4ddbd2cd2b76bb4ce8b871}{RXHandler};
119     \}
\end{DoxyCode}
\mbox{\Hypertarget{class_android_app_1_1_b_t_connection_a03907fd685748cb0da88a7f17d90885f}\label{class_android_app_1_1_b_t_connection_a03907fd685748cb0da88a7f17d90885f}} 
\index{Android\+App\+::\+B\+T\+Connection@{Android\+App\+::\+B\+T\+Connection}!run@{run}}
\index{run@{run}!Android\+App\+::\+B\+T\+Connection@{Android\+App\+::\+B\+T\+Connection}}
\subsubsection{\texorpdfstring{run()}{run()}}
{\footnotesize\ttfamily void Android\+App.\+B\+T\+Connection.\+run (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Main run procedure for new Runnable thread created. 

If connected procedure waits for data to be received. Parsing this received into lines and then splitting each line into a J\+S\+O\+N\+Object. If a valid J\+S\+O\+N\+Object is found it is then sends to the receive handler in a seperate thread (using messages). 
\begin{DoxyCode}
130                       \{
131         InputStream RXStream;
132 
133         \textcolor{comment}{/* Indicate that we are now running main thread */}
134         \hyperlink{class_android_app_1_1_b_t_connection_ace01a7a97f5d1abccb61a5d6c6ad9295}{running} = \textcolor{keyword}{true};
135 
136         \textcolor{keywordflow}{if} (\hyperlink{class_android_app_1_1_b_t_connection_a1c91fcddfe9f3b69cd0141742103191a}{isConnected}()) \{
137             \textcolor{comment}{/* Get our input stream for receiving bytes */}
138             \textcolor{keywordflow}{try} \{
139                 RXStream = \hyperlink{class_android_app_1_1_b_t_connection_af3cdc6c880b28361d87d0118ace0e49c}{btSocket}.getInputStream();
140             \} \textcolor{keywordflow}{catch} (IOException e) \{
141                 Log.e(\hyperlink{class_android_app_1_1_b_t_connection_ad838024d59c68be866b5db329d6f6230}{TAG}, \textcolor{stringliteral}{"Unable to get RXStream"}, e);
142                 \hyperlink{class_android_app_1_1_b_t_connection_ace01a7a97f5d1abccb61a5d6c6ad9295}{running} = \textcolor{keyword}{false};
143                 \textcolor{keywordflow}{return};
144             \}
145 
146             \textcolor{comment}{/*}
147 \textcolor{comment}{             * While still connected and not signalled to stop we receive data}
148 \textcolor{comment}{             * and then send it to the handler}
149 \textcolor{comment}{             */}
150             String recvBuff = \textcolor{stringliteral}{""};
151             \textcolor{keywordflow}{while} (\hyperlink{class_android_app_1_1_b_t_connection_a88abb39350aef278f15e54be4d0d1df3}{isRunning}() && \hyperlink{class_android_app_1_1_b_t_connection_a1c91fcddfe9f3b69cd0141742103191a}{isConnected}()) \{
152                 \textcolor{keywordflow}{try} \{
153                     \textcolor{keywordtype}{int} bytesAvailable = RXStream.available();
154 
155                     \textcolor{keywordflow}{if} (bytesAvailable > 0) \{
156                         byte[] packetBytes = \textcolor{keyword}{new} byte[bytesAvailable];
157                         \textcolor{keywordtype}{int} bytesRead = RXStream.read(packetBytes, 0, bytesAvailable);
158 
159                         recvBuff += \textcolor{keyword}{new} String(packetBytes);
160                     \}
161 
162                     \textcolor{keywordflow}{if} (\hyperlink{class_android_app_1_1_b_t_connection_a4e3bfea96a4ddbd2cd2b76bb4ce8b871}{RXHandler} != null) \{
163 
164                         \textcolor{keywordflow}{if} (recvBuff.indexOf(\hyperlink{class_android_app_1_1_b_t_connection_afe2f59edec0610e765222e02ab350e84}{NEW\_LINE}) > 0) \{
165 
166                             String jsonLine = recvBuff.substring(0, recvBuff.indexOf(
      \hyperlink{class_android_app_1_1_b_t_connection_afe2f59edec0610e765222e02ab350e84}{NEW\_LINE}));
167 
168                             \textcolor{comment}{/*}
169 \textcolor{comment}{                             * Having to send data to main thread using messages}
170 \textcolor{comment}{                             * as we are multithreading.}
171 \textcolor{comment}{                             * If we try and use a standard call to function}
172 \textcolor{comment}{                             * will cause a crash.}
173 \textcolor{comment}{                             */}
174                             Bundle dataBundle =  \textcolor{keyword}{new} Bundle();
175                             dataBundle.putString(\textcolor{stringliteral}{"JSON"}, jsonLine);
176 
177                             Message message = \hyperlink{class_android_app_1_1_b_t_connection_a4e3bfea96a4ddbd2cd2b76bb4ce8b871}{RXHandler}.obtainMessage();
178                             message.setData(dataBundle);
179                             message.sendToTarget();
180 
181                             recvBuff = recvBuff.replace(jsonLine + \hyperlink{class_android_app_1_1_b_t_connection_afe2f59edec0610e765222e02ab350e84}{NEW\_LINE}, \textcolor{stringliteral}{""});
182                         \}
183                     \}
184 
185                 \} \textcolor{keywordflow}{catch} (IOException e) \{
186                     Log.e(\hyperlink{class_android_app_1_1_b_t_connection_ad838024d59c68be866b5db329d6f6230}{TAG}, \textcolor{stringliteral}{"Unable to read data"}, e);
187                     \hyperlink{class_android_app_1_1_b_t_connection_ace01a7a97f5d1abccb61a5d6c6ad9295}{running} = \textcolor{keyword}{false};
188                     \textcolor{keywordflow}{return};
189                 \}
190             \}
191 
192         \}
193 
194         \textcolor{comment}{/* Close bluetooth socket */}
195         \textcolor{keywordflow}{try} \{
196             this.\hyperlink{class_android_app_1_1_b_t_connection_a37bb3e5c1dcf6b78a73239f6f62ab6d8}{close}();
197         \} \textcolor{keywordflow}{catch} (IOException e) \{
198             \textcolor{comment}{/* Do nothing */}
199         \}
200 
201         \textcolor{comment}{/* Null BT socket to show needs to reconnect */}
202         \hyperlink{class_android_app_1_1_b_t_connection_af3cdc6c880b28361d87d0118ace0e49c}{btSocket} = null;
203         \hyperlink{class_android_app_1_1_b_t_connection_ace01a7a97f5d1abccb61a5d6c6ad9295}{running} = \textcolor{keyword}{false};
204     \}
\end{DoxyCode}
\mbox{\Hypertarget{class_android_app_1_1_b_t_connection_a88abb39350aef278f15e54be4d0d1df3}\label{class_android_app_1_1_b_t_connection_a88abb39350aef278f15e54be4d0d1df3}} 
\index{Android\+App\+::\+B\+T\+Connection@{Android\+App\+::\+B\+T\+Connection}!is\+Running@{is\+Running}}
\index{is\+Running@{is\+Running}!Android\+App\+::\+B\+T\+Connection@{Android\+App\+::\+B\+T\+Connection}}
\subsubsection{\texorpdfstring{is\+Running()}{isRunning()}}
{\footnotesize\ttfamily boolean Android\+App.\+B\+T\+Connection.\+is\+Running (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Function to check whether main connection thread is running. 

\begin{DoxyReturn}{Returns}
boolean -\/ Whether thread is running. 
\end{DoxyReturn}

\begin{DoxyCode}
217                                \{
218         \textcolor{keywordflow}{return} \hyperlink{class_android_app_1_1_b_t_connection_ace01a7a97f5d1abccb61a5d6c6ad9295}{running};
219     \}
\end{DoxyCode}
\mbox{\Hypertarget{class_android_app_1_1_b_t_connection_a1c91fcddfe9f3b69cd0141742103191a}\label{class_android_app_1_1_b_t_connection_a1c91fcddfe9f3b69cd0141742103191a}} 
\index{Android\+App\+::\+B\+T\+Connection@{Android\+App\+::\+B\+T\+Connection}!is\+Connected@{is\+Connected}}
\index{is\+Connected@{is\+Connected}!Android\+App\+::\+B\+T\+Connection@{Android\+App\+::\+B\+T\+Connection}}
\subsubsection{\texorpdfstring{is\+Connected()}{isConnected()}}
{\footnotesize\ttfamily boolean Android\+App.\+B\+T\+Connection.\+is\+Connected (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Function to check whether BT connection is still valid. 

\begin{DoxyReturn}{Returns}
boolean -\/ Whether connection is still available. 
\end{DoxyReturn}

\begin{DoxyCode}
225                                  \{
226         \textcolor{keywordtype}{boolean} result = \textcolor{keyword}{false};
227 
228         \textcolor{keywordflow}{if} (\hyperlink{class_android_app_1_1_b_t_connection_af3cdc6c880b28361d87d0118ace0e49c}{btSocket} != null) \{
229             \textcolor{keywordflow}{if} (\hyperlink{class_android_app_1_1_b_t_connection_af3cdc6c880b28361d87d0118ace0e49c}{btSocket}.isConnected())
230                 result = \textcolor{keyword}{true};
231         \}
232         \textcolor{keywordflow}{return} result;
233     \}
\end{DoxyCode}
\mbox{\Hypertarget{class_android_app_1_1_b_t_connection_a1dfc9451ba1b40089f17ee081486602e}\label{class_android_app_1_1_b_t_connection_a1dfc9451ba1b40089f17ee081486602e}} 
\index{Android\+App\+::\+B\+T\+Connection@{Android\+App\+::\+B\+T\+Connection}!connect@{connect}}
\index{connect@{connect}!Android\+App\+::\+B\+T\+Connection@{Android\+App\+::\+B\+T\+Connection}}
\subsubsection{\texorpdfstring{connect()}{connect()}}
{\footnotesize\ttfamily void Android\+App.\+B\+T\+Connection.\+connect (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) throws I\+O\+Exception\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}



Procedure to create a connection to logging device. 

Creates a raw Serial socket via U\+U\+ID and then attempts to connect. Exceptions thrown on failure. 
\begin{DoxyCode}
241                                               \{
242 
243         \textcolor{comment}{/* Attempt to make connection to remote device, throw exception if not */}
244         \textcolor{keywordflow}{try} \{
245             \hyperlink{class_android_app_1_1_b_t_connection_af3cdc6c880b28361d87d0118ace0e49c}{btSocket} = \hyperlink{class_android_app_1_1_b_t_connection_a3ed1e51b0f24f0b20ca5c27270f2999c}{btDevice}.createRfcommSocketToServiceRecord(
      \hyperlink{class_android_app_1_1_b_t_connection_a0e531d4cad0e5cca1e5b4446551b5c63}{uuid});
246         \} \textcolor{keywordflow}{catch} (IOException e) \{
247             Log.e(\hyperlink{class_android_app_1_1_b_t_connection_ad838024d59c68be866b5db329d6f6230}{TAG}, \textcolor{stringliteral}{"Unable to create RFCOMM"}, e);
248             \textcolor{keywordflow}{throw} e;
249         \}
250 
251         \textcolor{keywordflow}{try} \{
252             \hyperlink{class_android_app_1_1_b_t_connection_af3cdc6c880b28361d87d0118ace0e49c}{btSocket}.connect();
253         \} \textcolor{keywordflow}{catch} (IOException e) \{
254             Log.e(\hyperlink{class_android_app_1_1_b_t_connection_ad838024d59c68be866b5db329d6f6230}{TAG}, \textcolor{stringliteral}{"Unable to connect"}, e);
255 
256             \textcolor{comment}{/* Close our socket as unable to connect */}
257             \textcolor{keywordflow}{try} \{
258                 this.\hyperlink{class_android_app_1_1_b_t_connection_a37bb3e5c1dcf6b78a73239f6f62ab6d8}{close}();
259             \} \textcolor{keywordflow}{catch} (IOException e2) \{
260                 \textcolor{keywordflow}{throw} e2;
261             \}
262             \textcolor{keywordflow}{throw} e;
263         \}
264     \}
\end{DoxyCode}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{class_android_app_1_1_b_t_connection_a3236a74297d91f15dd63efc66f03a821}\label{class_android_app_1_1_b_t_connection_a3236a74297d91f15dd63efc66f03a821}} 
\index{Android\+App\+::\+B\+T\+Connection@{Android\+App\+::\+B\+T\+Connection}!tx\+Handler@{tx\+Handler}}
\index{tx\+Handler@{tx\+Handler}!Android\+App\+::\+B\+T\+Connection@{Android\+App\+::\+B\+T\+Connection}}
\subsubsection{\texorpdfstring{tx\+Handler}{txHandler}}
{\footnotesize\ttfamily final Handler Android\+App.\+B\+T\+Connection.\+tx\+Handler}

{\bfseries Initial value\+:}
\begin{DoxyCode}
= \textcolor{keyword}{new} Handler(Looper.getMainLooper()) \{

        
        @Override
        \textcolor{keyword}{public} \textcolor{keywordtype}{void} handleMessage(Message msg) \{

            
            \textcolor{keywordflow}{if} (\hyperlink{class_android_app_1_1_b_t_connection_a1c91fcddfe9f3b69cd0141742103191a}{isConnected}() && \hyperlink{class_android_app_1_1_b_t_connection_a88abb39350aef278f15e54be4d0d1df3}{isRunning}()) \{
                OutputStream TXStream;

                
                \textcolor{keywordflow}{try} \{
                    TXStream = \hyperlink{class_android_app_1_1_b_t_connection_af3cdc6c880b28361d87d0118ace0e49c}{btSocket}.getOutputStream();

                    String txString = (String)msg.obj;
                    TXStream.write(txString.getBytes());
                \} \textcolor{keywordflow}{catch} (IOException e) \{
                    Log.e(\hyperlink{class_android_app_1_1_b_t_connection_ad838024d59c68be866b5db329d6f6230}{TAG}, \textcolor{stringliteral}{"Unable to use TXStream"}, e);
                    \textcolor{keywordflow}{return};
                \}
            \}
        \}
    \}
\end{DoxyCode}


Handler class for transmission of data. 

Messages containing data to be transmitted are sent from main UI thread. 

The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
android-\/app/app/src/main/java/com/jack/motorbikestatistics/\hyperlink{_b_t_connection_8java}{B\+T\+Connection.\+java}\end{DoxyCompactItemize}
