\hypertarget{classcom_1_1jack_1_1motorbikestatistics_1_1_pair_device_fragment_1_1_device_item_listener}{}\section{com.\+jack.\+motorbikestatistics.\+Pair\+Device\+Fragment.\+Device\+Item\+Listener Class Reference}
\label{classcom_1_1jack_1_1motorbikestatistics_1_1_pair_device_fragment_1_1_device_item_listener}\index{com.\+jack.\+motorbikestatistics.\+Pair\+Device\+Fragment.\+Device\+Item\+Listener@{com.\+jack.\+motorbikestatistics.\+Pair\+Device\+Fragment.\+Device\+Item\+Listener}}


Listener for when a List\+View item is pressed (to connect).  


Inheritance diagram for com.\+jack.\+motorbikestatistics.\+Pair\+Device\+Fragment.\+Device\+Item\+Listener\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classcom_1_1jack_1_1motorbikestatistics_1_1_pair_device_fragment_1_1_device_item_listener}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classcom_1_1jack_1_1motorbikestatistics_1_1_pair_device_fragment_1_1_device_item_listener_ac059da38636222d0dc280176c46dfc3e}{on\+Item\+Click} (Adapter\+View$<$?$>$ parent, View view, int position, long id)
\begin{DoxyCompactList}\small\item\em Function called when user wants to connect to a device. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Listener for when a List\+View item is pressed (to connect). 

\subsection{Member Function Documentation}
\mbox{\Hypertarget{classcom_1_1jack_1_1motorbikestatistics_1_1_pair_device_fragment_1_1_device_item_listener_ac059da38636222d0dc280176c46dfc3e}\label{classcom_1_1jack_1_1motorbikestatistics_1_1_pair_device_fragment_1_1_device_item_listener_ac059da38636222d0dc280176c46dfc3e}} 
\index{com\+::jack\+::motorbikestatistics\+::\+Pair\+Device\+Fragment\+::\+Device\+Item\+Listener@{com\+::jack\+::motorbikestatistics\+::\+Pair\+Device\+Fragment\+::\+Device\+Item\+Listener}!on\+Item\+Click@{on\+Item\+Click}}
\index{on\+Item\+Click@{on\+Item\+Click}!com\+::jack\+::motorbikestatistics\+::\+Pair\+Device\+Fragment\+::\+Device\+Item\+Listener@{com\+::jack\+::motorbikestatistics\+::\+Pair\+Device\+Fragment\+::\+Device\+Item\+Listener}}
\subsubsection{\texorpdfstring{on\+Item\+Click()}{onItemClick()}}
{\footnotesize\ttfamily void com.\+jack.\+motorbikestatistics.\+Pair\+Device\+Fragment.\+Device\+Item\+Listener.\+on\+Item\+Click (\begin{DoxyParamCaption}\item[{Adapter\+View$<$?$>$}]{parent,  }\item[{View}]{view,  }\item[{int}]{position,  }\item[{long}]{id }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Function called when user wants to connect to a device. 

Discovery is turned off to stop power wastage. A new connection thread is then created which is responsible for parsing receive, and transmission requests from other fragments.


\begin{DoxyParams}{Parameters}
{\em parent} & -\/ The parent List\+View. \\
\hline
{\em view} & -\/ Current view of the List\+Item. \\
\hline
{\em position} & -\/ Index of item pressed in List\+View. \\
\hline
{\em id} & -\/ ID of the List\+Item. \\
\hline
\end{DoxyParams}


References com.\+jack.\+motorbikestatistics.\+B\+T\+Device\+Item.\+get\+Connection(), com.\+jack.\+motorbikestatistics.\+B\+T\+Device\+Item.\+get\+Device(), com.\+jack.\+motorbikestatistics.\+B\+T\+Connection.\+is\+Connected(), com.\+jack.\+motorbikestatistics.\+B\+T\+Device\+Item.\+set\+Connection(), com.\+jack.\+motorbikestatistics.\+B\+T\+Device\+Item.\+set\+Icon\+I\+D(), and com.\+jack.\+motorbikestatistics.\+B\+T\+Device\+Item.\+set\+Status().


\begin{DoxyCode}
305                                                                                          \{
306 
307             BTDeviceItem deviceItem = (BTDeviceItem)parent.getItemAtPosition(position);
308 
309             \textcolor{comment}{/* Check if there is already a connection between devices */}
310             \textcolor{keywordflow}{if} ((deviceItem.getConnection() == null) ||
311                     (!deviceItem.getConnection().isConnected()))
312             \{
313                 \textcolor{keywordflow}{if} (\hyperlink{classcom_1_1jack_1_1motorbikestatistics_1_1_pair_device_fragment_ac21b65a91245ae03ebba675e41166ace}{btAdapter}.isDiscovering())
314                 \{
315                     \textcolor{comment}{/* Cancel discovery is still enabled */}
316                     \hyperlink{classcom_1_1jack_1_1motorbikestatistics_1_1_pair_device_fragment_a1bf1c9b623a1b9891e0d574006cf8d5f}{btnScan}.setChecked(\textcolor{keyword}{false});
317                     \hyperlink{classcom_1_1jack_1_1motorbikestatistics_1_1_pair_device_fragment_ac21b65a91245ae03ebba675e41166ace}{btAdapter}.cancelDiscovery();
318                 \}
319 
320                 \textcolor{keywordflow}{try}
321                 \{
322                     Toast.makeText(parent.getContext(), \textcolor{stringliteral}{"Connecting to: "} +
323                             deviceItem.getDevice().getName(), Toast.LENGTH\_SHORT).show();
324 
325                     \textcolor{comment}{/* Create a new BTConnection item with no RX handler */}
326                     BTConnection newConn = \textcolor{keyword}{new} BTConnection(deviceItem.getDevice());
327 
328                     \textcolor{comment}{/* Execute the 'run' procedure in object in new thread */}
329                     Thread tmpThread = \textcolor{keyword}{new} Thread(newConn);
330                     tmpThread.start();
331 
332                     \textcolor{comment}{/* Add set connection and add item to listview */}
333                     deviceItem.setConnection(newConn);
334                     \hyperlink{classcom_1_1jack_1_1motorbikestatistics_1_1_pair_device_fragment_afb95960b8365f4696444ea7683ebbf93}{btConnectedDevice} = deviceItem;
335 
336                     \textcolor{comment}{/* Update status and icon in list view */}
337                     deviceItem.\hyperlink{classcom_1_1jack_1_1motorbikestatistics_1_1_b_t_device_item_a40eb2a1f46700690d2327bf37bc5ed0e}{setIconID}(R.drawable.ic\_bluetooth\_connected\_black\_24px);
338                     deviceItem.setStatus(\hyperlink{classcom_1_1jack_1_1motorbikestatistics_1_1_pair_device_fragment_a99e2ea55ac395622e937982582b2a6bf}{CONNECTED\_STATUS});
339                     \hyperlink{classcom_1_1jack_1_1motorbikestatistics_1_1_pair_device_fragment_a5ab5efcda2c2fe8db4420ec28ea2840f}{lvAdapter}.notifyDataSetChanged();
340                 \}
341                 \textcolor{keywordflow}{catch} (IOException e)
342                 \{
343                     Toast.makeText(parent.getContext(), \textcolor{stringliteral}{"Unable to connect: "} +
344                             e.toString(), Toast.LENGTH\_SHORT).show();
345                 \}
346             \}
347         \}
\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
android-\/app/app/src/main/java/com/jack/motorbikestatistics/\hyperlink{_pair_device_fragment_8java}{Pair\+Device\+Fragment.\+java}\end{DoxyCompactItemize}
